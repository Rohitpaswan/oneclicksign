<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5 text-center">
    <div class="card p-4" style="max-width: 400px; margin: 0 auto;">
        <h2 class="mb-3">Welcome, <span th:text="${user.name}">Username</span>!</h2>
        <img class="rounded-circle mb-3" style="width: 100px;" th:src="@{${user.picture}}" alt="Profile Picture">

        <p>Email: <strong th:text="${user.email}">email@example.com</strong></p>
    </div>

    <!-- Logout Button inside a div -->
    <div class="mt-3">
        <button  class="btn btn-danger" onclick="logout(event)">Logout</button>
    </div>
</div>
<script>
    async function logout(event) {
        event.preventDefault();

        try {
            const response = await fetch('/logout', {
                method: 'GET'
            });

            const redirectUrl = await response.text();
            // Redirect user
            window.location.href = redirectUrl;
        } catch (error) {
            console.error("Error during logout:", error);
        }
    }
</script>

</body>
</html>
